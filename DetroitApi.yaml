openapi: 3.0.3
info:
  version: '0.1'
  title: 'Detroit API'
  description: |
    # Detroit API Overview
    Work in progess...
    
  termsOfService: ""
  contact:
    name: LY Cheng
    url: 
    email: lyforever62@hotmail.com
  license:
    name: MIT License
    url: https://github.com/yhsiang/detroit/LICENSE

servers:
  - url: 'localhost:3000/api'
    description: Detroit API

paths:
  /fork:
    get:
      summary: Fork
      description: 'Fork a new simulation environment with current block height.'
      responses:
        '200':
          description: 'Request succeeded'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ForkResponse'
  /json_rpc:
    get: 
      summary: Call Ethereum JSON-RPC
      description: 'Call Ethereum JSON-RPC'
      requestBody:
        description: 'Ethereum JSON-RPC'
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JsonRpcRequest'
      responses:
        '200':
          description: 'Request succeeded'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonRpcResponse'
  /unfork:
    get:
      summary: Remove simulation environment
      description: 'Remove simulation environment'
      responses:
        '200':
          description: 'Request succeeded'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
      
components:
  schemas:
    ForkResponse:
      type: object
      required:
        - amount
        - address
        - signature
      properties:
        amount:
          type: string
          description: Amount of token to mint
        address:
          type: string
          description: Address of minter
        signature:
          type: string
    JsonRpcRequest:
      type: object
      required:
        - jsonrpc
        - id
        - method
        - params
      properties:
        method:
          type: string
          description: Method
        params:
          type: array
          description: Parameters
    JsonRpcResponse:
      type: object
      required:
        - jsonrpc
        - id
        - result
        properties:
          jsonrpc:
            type: string
            description: Version of Json Rpc
          id:
            type: number
            description: Id of Json Rpc
          result:
            type: string
            description: Result of Json Rpc
    Success:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          description: succeeded message
